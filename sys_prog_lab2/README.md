# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞: –õ–µ–∫—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä PHP

–í–∏–∫–æ–Ω–∞–Ω–Ω—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ "–°–∏—Å—Ç–µ–º–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è".

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é –ª–µ–∫—Å–∏—á–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä–∞ –¥–ª—è –ø—ñ–¥–º–Ω–æ–∂–∏–Ω–∏ –º–æ–≤–∏ PHP, –Ω–∞–ø–∏—Å–∞–Ω–æ–≥–æ –Ω–∞ C++. –í—ñ–Ω —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏, —â–æ –≤–∫–ª—é—á–∞—î —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤ –ª–µ–∫—Å–µ–º.

–ì–æ–ª–æ–≤–Ω–æ—é –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—é —Ü—å–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É —î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è **–¥–≤–æ—Ö** –æ–∫—Ä–µ–º–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ –ª–µ–∫—Å–∏—á–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É, —è–∫ —Ç–æ–≥–æ –≤–∏–º–∞–≥–∞–ª–∏ —É–º–æ–≤–∏ –∑–∞–≤–¥–∞–Ω–Ω—è, –∑ –º–µ—Ç–æ—é –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —ó—Ö–Ω—å–æ—ó –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

* **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è 1 (`LexerRegex`):** –õ–µ–∫—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä, —â–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ `std::regex`. –í–∏–∫–æ–Ω—É—î –±–∞–∑–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ 3 –±–∞–ª–∏.
* **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è 2 (`LexerFSM`):** –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π, –≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–π –ª–µ–∫—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä, —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —è–∫ —Ä—É—á–Ω–∏–π —Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç (FSM). –í–∏–∫–æ–Ω—É—î –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ +4 –±–∞–ª–∏.
* **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** –ü—Ä–æ–≥—Ä–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î –æ–±–∏–¥–≤–∞ –ª–µ–∫—Å–µ—Ä–∏ –Ω–∞ –¥–≤–æ—Ö –≤–±—É–¥–æ–≤–∞–Ω–∏—Ö —Ç–µ—Å—Ç–æ–≤–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö (`TEST1` —Ç–∞ `TEST2`).
* **–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è:** –í–±—É–¥–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è `compare_results` –ø–æ-—Ç–æ–∫–µ–Ω–Ω–æ –ø–æ—Ä—ñ–≤–Ω—é—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –æ–±–æ—Ö –ª–µ–∫—Å–µ—Ä—ñ–≤ —ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –±—É–¥—å-—è–∫—ñ —Ä–æ–∑–±—ñ–∂–Ω–æ—Å—Ç—ñ.
* **–ë–µ–Ω—á–º–∞—Ä–∫—ñ–Ω–≥:** –ü—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–º—ñ—Ä—é—î —Ç–∞ –¥—Ä—É–∫—É—î —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä–∞ –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö.

## üõ†Ô∏è –ó–±—ñ—Ä–∫–∞ —Ç–∞ –ó–∞–ø—É—Å–∫

–î–ª—è –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —Ç–∞ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç—É –ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä C++, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç C++17 (–∞–±–æ –Ω–æ–≤—ñ—à–∏–π), –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `std::regex`.

1.  **–ö–æ–º–ø—ñ–ª—è—Ü—ñ—è** (—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è —É–≤—ñ–º–∫–Ω—É—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é `-O2` –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –±–µ–Ω—á–º–∞—Ä–∫—ñ–Ω–≥—É):
    ```bash
    g++ -std=c++17 -o lexer main.cpp -O2
    ```

2.  **–ó–∞–ø—É—Å–∫:**
    ```bash
    ./lexer
    ```

## ‚öôÔ∏è –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

–ü—Ä–æ–≥—Ä–∞–º–∞ –º—ñ—Å—Ç–∏—Ç—å –¥–≤—ñ –∫–ª—é—á–æ–≤—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏, –∫–æ–∂–Ω–∞ –∑ —è–∫–∏—Ö —î –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–º –ª–µ–∫—Å–∏—á–Ω–∏–º –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä–æ–º.

### 1. `LexerRegex` (–ë–∞–∑–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è)

–¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –≤–∏–∫–æ–Ω—É—î –≤–∏–º–æ–≥—É "—Ä–æ–∑–±–∏—Ç—Ç—è –Ω–∞ –ª–µ–∫—Å–µ–º–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–∏–º–∏ –≤–∏—Ä–∞–∑–∞–º–∏".

* **–ü—Ä–∏–Ω—Ü–∏–ø:** –£ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ –≤—ñ–Ω –¥–∏–Ω–∞–º—ñ—á–Ω–æ –±—É–¥—É—î –æ–¥–∏–Ω –≥—ñ–≥–∞–Ω—Ç—Å—å–∫–∏–π `std::regex`, –æ–±'—î–¥–Ω—É—é—á–∏ –≤—Å—ñ –ø—Ä–∞–≤–∏–ª–∞ (–¥–ª—è —á–∏—Å–µ–ª, —Ä—è–¥–∫—ñ–≤, –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ —ñ —Ç.–¥.) —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä `|`. –ö–æ–∂–Ω–µ –ø—Ä–∞–≤–∏–ª–æ –∑–∞–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è –≤ `(...)` (–≥—Ä—É–ø—É –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è).
* **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∞–≤–∏–ª:** –ü–æ—Ä—è–¥–æ–∫ —î –∫—Ä–∏—Ç–∏—á–Ω–∏–º. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è `VARIABLE` (`"\\$[a-zA-Z_]..."`) –º–∞—î –π—Ç–∏ *–ø–µ—Ä–µ–¥* `IDENT`, —ñ–Ω–∞–∫—à–µ `$name` –±—É–¥–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.
* **–í–∏–∫–æ–Ω–∞–Ω–Ω—è:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `std::sregex_iterator` –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ –ø–æ—à—É–∫—É *–≤—Å—ñ—Ö* –∑–±—ñ–≥—ñ–≤ —Ü—å–æ–≥–æ –≥—ñ–≥–∞–Ω—Ç—Å—å–∫–æ–≥–æ –≤–∏—Ä–∞–∑—É —É –≤—Ö—ñ–¥–Ω–æ–º—É –∫–æ–¥—ñ.
* **–ù–µ–¥–æ–ª—ñ–∫:** –Ø–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, —Ü–µ–π –º–µ—Ç–æ–¥ —î **–∑–Ω–∞—á–Ω–æ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–º** (–≤ ~50-60 —Ä–∞–∑—ñ–≤) –∑–∞ —Ä—É—á–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —ñ –¥—É–∂–µ —Å–∫–ª–∞–¥–Ω–∏–π —É –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—ñ —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª–∞ –µ–∫—Ä–∞–Ω—É–≤–∞–Ω–Ω—è C++.

### 2. `LexerFSM` (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è)

–¶–µ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–µ–∫—Å–∏—á–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —á–µ—Ä–µ–∑ —Ä—É—á–Ω–∏–π **—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç (FSM)**.

* **–ü—Ä–∏–Ω—Ü–∏–ø:** –¶–µ –∫–ª–∞—Å–∏—á–Ω–∏–π –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑. –õ–µ–∫—Å–µ—Ä –º–∞—î —Å—Ç–∞–Ω (–ø–æ–∑–∏—Ü—ñ—è `pos`, —Ä—è–¥–æ–∫ `line`, –∫–æ–ª–æ–Ω–∫–∞ `col`) —ñ –ø—Ä–∏–π–º–∞—î —Ä—ñ—à–µ–Ω–Ω—è, –¥–∏–≤–ª—è—á–∏—Å—å –Ω–∞ –ø–æ—Ç–æ—á–Ω–∏–π —Å–∏–º–≤–æ–ª.
* **`peek()` vs `get()`:** "–î–≤–∏–≥—É–Ω" –ª–µ–∫—Å–µ—Ä–∞. `peek()` "–ø—ñ–¥–≥–ª—è–¥–∞—î" –Ω–∞–ø–µ—Ä–µ–¥, –Ω–µ –∑—Å—É–≤–∞—é—á–∏ –∫—É—Ä—Å–æ—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± –≤—ñ–¥—Ä—ñ–∑–Ω–∏—Ç–∏ `/` –≤—ñ–¥ `//`), –∞ `get()` —Å–ø–æ–∂–∏–≤–∞—î —Å–∏–º–≤–æ–ª —ñ –∑—Å—É–≤–∞—î –∫—É—Ä—Å–æ—Ä.
* **Maximal Munch:** –ü—Ä–æ–±–ª–µ–º–∞ "–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ–≥–ª–∏–Ω–∞–Ω–Ω—è" (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ `??=` –∞ –Ω–µ `??` —Ç–∞ `=`) –≤–∏—Ä—ñ—à—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —î–¥–∏–Ω–æ–≥–æ, –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–æ–≥–æ –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é —Å–ø–∏—Å–∫—É `ALL_OPS`. –õ–µ–∫—Å–µ—Ä –∑–∞–≤–∂–¥–∏ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–Ω–∞–π—Ç–∏ –Ω–∞–π–¥–æ–≤—à–∏–π –º–æ–∂–ª–∏–≤–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –∑—ñ —Å–ø–∏—Å–∫—É.

## –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–∞ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

–í–∏–≤—ñ–¥ –ø—Ä–æ–≥—Ä–∞–º–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø–æ–≤–Ω—É —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –æ–±–æ—Ö –ª–µ–∫—Å–µ—Ä—ñ–≤ —Ç–∞ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—É —Ä—ñ–∑–Ω–∏—Ü—é —É —à–≤–∏–¥–∫–æ–¥—ñ—ó.

* `LexerRegex` (`std::regex`) —î –ø—Ä–æ—Å—Ç–∏–º —É –Ω–∞–ø–∏—Å–∞–Ω–Ω—ñ –ø—Ä–∞–≤–∏–ª, –∞–ª–µ **–¥—É–∂–µ –ø–æ–≤—ñ–ª—å–Ω–∏–º** —É –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ.
* `LexerFSM` (—Ä—É—á–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç) –≤–∏–º–∞–≥–∞—î –±—ñ–ª—å—à–µ –∫–æ–¥—É, –∞–ª–µ —î **–Ω–µ–π–º–æ–≤—ñ—Ä–Ω–æ —à–≤–∏–¥–∫–∏–º**, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–∏–π –ø—Ä–æ—Ö—ñ–¥ –ø–æ –ø–∞–º'—è—Ç—ñ.

### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É
